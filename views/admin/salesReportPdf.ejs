



    <!-- Breadcrumb Section Begin -->

    <section class="breadcrumb-option ">
        <div class="">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text ml-5">
                        <h4>Sales Report</h4>
                        <div class="breadcrumb__links">
                            <a href="/admin/dashboard">Home</a>
                            <span>Sales Report</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <main class="main my-5 mx-3">
        <div class="">



            <% if(orders && orders.length>0) { %>






                <div class="table-responsive" id="no-more-tables">
                    <table class="table table-striped bg-white pt-3">
                        <thead class=" ">
                            <tr class="">
                                <th class="text-dark text-center" style="font-size: 15px;" scope="col" class="sorting ">
                                    ORDER ID </th>

                                <th class="text-dark text-center" style="font-size: 15px;" scope="col" class="sorting ">
                                    ORDER DATE </th>
                                <th class="text-dark text-center" style="font-size: 15px; min-width: 200px;" scope="col"
                                    class="sorting">
                                    PRODUCTS
                                </th>

                                <th class="text-dark text-center" style="font-size: 15px;" scope="col" class="sorting">
                                    STATUS</th>

                                <th class="text-dark text-center" style="font-size: 15px;" scope="col" class="sorting">
                                    PAY </th>

                                <th class="text-dark text-center" style="font-size: 15px;" scope="col" class="sorting">
                                    GT
                                </th>



                                <th class="text-dark text-center " style="font-size: 15px;" scope="col" class="sorting">
                                    DIS
                                </th>

                                <th class="text-dark text-center " style="font-size: 15px;" scope="col" class="sorting">
                                    CAT DIS
                                </th>


                                <th class="text-dark text-center" style="font-size: 15px;" scope="col">
                                    FP
                                </th>




                            </tr>
                        </thead>
                        <tbody>

                            <% for(let i=0; i < orders.length ;i++) { %>


                                <tr data-id="" class="text-center" style="font-size: .8rem;">

                                    <td data-title="Name">
                                        <%=orders[i]._id%>
                                    </td>

                                    <td style="max-width: 150px;" data-title="Name">

                                        <% const options={ year: 'numeric' , month: 'short' , day: 'numeric' ,
                                            hour: '2-digit' , minute: '2-digit' , second: '2-digit' ,
                                            timeZoneName: 'short' }; const
                                            shortDate=orders[i].orderDate.toLocaleDateString('en-US', options); %>

                                            <%=shortDate %>

                                    </td>
                                    <td style="max-width: 200px;" data-title="Email">

                                        <ul>

                                            <% if(orders[i].products && orders[i].products.length>0) {%>
                                                <% for(let j=0 ; j< orders[i].products.length ; j++ ){%>

                                                    <li class="text-uppercase list-unstyled mt-3 "style="text-transform: capitalize;">
                                                        <%=orders[i].products[j].product.name%> (
                                                            <%=orders[i].products[j].quantity%>
                                                                )
                                                    </li>


                                                    <% }%>
                                                        <%}%>



                                        </ul>


                                    </td>

                                    <td data-title="Name"style="text-transform: capitalize;">
                                        <%=orders[i].status%>
                                    </td>

                                    <td data-title="Mobile">
                                        <%=orders[i].paymentStatus%>

                                    </td>

                                    <td data-title="Mobile">
                                        <%=orders[i].grossTotal%>

                                    </td>

                                    <td data-title="Mobile">
                                        <%=orders[i].discountAmount%>

                                    </td>

                                    <td data-title="Mobile" class="text-center">

                                        <% if(orders[i].categoryDiscount ){%>
                                            <%=orders[i].categoryDiscount%>
                                                <%} else {%>
                                                    0

                                                    <%}%>




                                    </td>

                                    <td data-title="Mobile">
                                        <%=orders[i].finalPrice%>

                                    </td>










                                </tr>

                                <%}%>










                        </tbody>
                    </table>
                </div>

                <%} else{%>

                    <div class=" text-danger">Orders Not Found
                    </div>

                    <%}%>
        </div>
    </main>







    <script>

        const notificationBtn = document.getElementById('notificationClose');
        const notificationMessage = document.getElementById('notification-message');
        const messageLine = document.getElementById('messageLine');

        notificationBtn.addEventListener('click', (e) => {

            notificationMessage.hidden = true
        })
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.js"></script>

    <script src="/js/dataTables.js"></script>

    <script src="/js/admin/getReport.js"></script>


   